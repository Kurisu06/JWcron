<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cronómetro Profesional</title>

<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: #0f172a;
    color: white;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* CONTENEDOR GENERAL */
.container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 22px;
}

/* RECTÁNGULO DEL CRONÓMETRO */
.timer-box {
    width: 520px;
    height: 160px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 90px;
    font-weight: 600;
    border-radius: 18px;
    background: #3f3f46;
    letter-spacing: 6px;
    transition: background 0.4s ease, all 0.3s ease;
}

/* CONTROLES */
.controls {
    display: flex;
    gap: 10px;
}

button, input {
    background: #1e293b;
    border: none;
    color: white;
    padding: 8px 14px;
    border-radius: 8px;
    font-size: 14px;
}

button {
    cursor: pointer;
    transition: 0.2s ease;
}

button:hover {
    background: #334155;
}

/* CONFIGURACIÓN */
.settings {
    display: flex;
    gap: 14px;
    align-items: center;
    font-size: 13px;
    opacity: 0.9;
}

/* Color picker minimalista */
.settings label {
    display: flex;
    align-items: center;
    gap: 6px;
}

input[type="color"] {
    width: 28px;
    height: 28px;
    border: none;
    padding: 0;
    background: none;
    cursor: pointer;
}

/* Ocultar controles en fullscreen */
.hidden {
    display: none;
}

/* Botón salir fullscreen */
#exitFullscreenBtn {
    position: fixed;
    top: 12px;
    left: 12px;
    background: none;
    border: none;
    color: white;
    font-size: 22px;
    opacity: 0.4;
    cursor: pointer;
    display: none;
    transition: 0.2s ease;
}

#exitFullscreenBtn:hover {
    opacity: 0.8;
}
</style>
</head>
<body>

<button id="exitFullscreenBtn" onclick="exitFullscreen()">←</button>

<div class="container" id="mainContent">

    <div class="timer-box" id="timer">00:00</div>

    <div class="controls">
        <button onclick="startTimer()">▶</button>
        <button onclick="pauseTimer()">⏸</button>
        <button onclick="resetTimer()">⟲</button>
        <button onclick="toggleFullscreen()">⛶</button>
    </div>

    <div class="settings">
        <span>Límite</span>
        <input type="number" id="limitInput" value="5" min="1" style="width:60px;">
        
        <label>P<input type="color" id="pauseColor" value="#3f3f46"></label>
        <label>M<input type="color" id="runColor" value="#16a34a"></label>
        <label>A<input type="color" id="warningColor" value="#f59e0b"></label>
        <label>E<input type="color" id="overColor" value="#dc2626"></label>
    </div>

</div>

<script>
let seconds = 0;
let running = false;
let interval;

const timerBox = document.getElementById("timer");
const mainContent = document.getElementById("mainContent");
const exitBtn = document.getElementById("exitFullscreenBtn");

function formatTime() {
    const m = String(Math.floor(seconds / 60)).padStart(2,'0');
    const s = String(seconds % 60).padStart(2,'0');
    return `${m}:${s}`;
}

function updateColor() {
    const limit = document.getElementById("limitInput").value * 60;
    const pauseColor = document.getElementById("pauseColor").value;
    const runColor = document.getElementById("runColor").value;
    const warningColor = document.getElementById("warningColor").value;
    const overColor = document.getElementById("overColor").value;

    let color;

    if (!running) color = pauseColor;
    else if (seconds >= limit) color = overColor;
    else if (seconds >= limit - 30) color = warningColor;
    else color = runColor;

    timerBox.style.background = color;
}

function updateDisplay() {
    timerBox.textContent = formatTime();
    updateColor();
}

function startTimer() {
    if (!running) {
        running = true;
        interval = setInterval(() => {
            seconds++;
            updateDisplay();
        }, 1000);
    }
}

function pauseTimer() {
    running = false;
    clearInterval(interval);
    updateDisplay();
}

function resetTimer() {
    running = false;
    clearInterval(interval);
    seconds = 0;
    updateDisplay();
}

function toggleFullscreen() {
    if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
        mainContent.querySelectorAll(".controls, .settings").forEach(e => e.classList.add("hidden"));
        timerBox.style.width = "100vw";
        timerBox.style.height = "100vh";
        timerBox.style.borderRadius = "0";
        timerBox.style.fontSize = "200px";
        exitBtn.style.display = "block";
    }
}

function exitFullscreen() {
    document.exitFullscreen();
}

document.addEventListener("fullscreenchange", () => {
    if (!document.fullscreenElement) {
        mainContent.querySelectorAll(".controls, .settings").forEach(e => e.classList.remove("hidden"));
        timerBox.style.width = "520px";
        timerBox.style.height = "160px";
        timerBox.style.borderRadius = "18px";
        timerBox.style.fontSize = "90px";
        exitBtn.style.display = "none";
    }
});

updateDisplay();
</script>

</body>
</html>
