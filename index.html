<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Cronómetro</title>

<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: #0f172a;
    color: white;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* CONTENEDOR */
.container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    width: 100%;
    max-width: 900px;
    padding: 20px;
    box-sizing: border-box;
}

/* RECTÁNGULO RESPONSIVE */
.timer-box {
    width: min(90vw, 600px);
    height: clamp(120px, 20vw, 200px);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: clamp(60px, 10vw, 140px);
    font-weight: 600;
    border-radius: 20px;
    background: #3f3f46;
    letter-spacing: 6px;
    transition: background 0.4s ease, all 0.3s ease;
    text-align: center;
}

/* CONTROLES */
.controls {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
}

button, input {
    background: #1e293b;
    border: none;
    color: white;
    padding: 10px 16px;
    border-radius: 10px;
    font-size: 14px;
}

button {
    cursor: pointer;
    transition: 0.2s ease;
}

button:hover {
    background: #334155;
}

/* CONFIGURACIÓN */
.settings {
    display: flex;
    flex-direction: column;
    gap: 14px;
    align-items: center;
    width: 100%;
}

.limit-control {
    display: flex;
    align-items: center;
    gap: 10px;
}

.color-controls {
    display: flex;
    flex-direction: column;
    gap: 10px;
    width: 100%;
    max-width: 320px;
}

.color-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

input[type="color"] {
    width: 36px;
    height: 30px;
    border: none;
    padding: 0;
    background: none;
    cursor: pointer;
}

/* FULLSCREEN */
.hidden {
    display: none;
}

#exitFullscreenBtn {
    position: fixed;
    top: 15px;
    left: 15px;
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    opacity: 0.35;
    cursor: pointer;
    display: none;
    transition: 0.2s ease;
    z-index: 999;
}

#exitFullscreenBtn:hover {
    opacity: 0.8;
}
</style>
</head>
<body>

<button id="exitFullscreenBtn" onclick="exitFullscreen()">←</button>

<div class="container" id="mainContent">

    <div class="timer-box" id="timer">00:00</div>

    <div class="controls">
        <button onclick="startTimer()">▶</button>
        <button onclick="pauseTimer()">⏸</button>
        <button onclick="resetTimer()">⟲</button>
        <button onclick="toggleFullscreen()">⛶</button>
    </div>

    <div class="settings">

        <div class="limit-control">
            <span>Tiempo límite (min)</span>
            <input type="number" id="limitInput" value="5" min="1" style="width:70px;">
        </div>

        <div class="color-controls">
            <div class="color-item">
                <span>Color en pausa</span>
                <input type="color" id="pauseColor" value="#3f3f46">
            </div>

            <div class="color-item">
                <span>Color en movimiento</span>
                <input type="color" id="runColor" value="#16a34a">
            </div>

            <div class="color-item">
                <span>Color advertencia</span>
                <input type="color" id="warningColor" value="#f59e0b">
            </div>

            <div class="color-item">
                <span>Tiempo excedido</span>
                <input type="color" id="overColor" value="#dc2626">
            </div>
        </div>

    </div>

</div>

<script>
let seconds = 0;
let running = false;
let interval;

const timerBox = document.getElementById("timer");
const mainContent = document.getElementById("mainContent");
const exitBtn = document.getElementById("exitFullscreenBtn");

function formatTime() {
    const m = String(Math.floor(seconds / 60)).padStart(2,'0');
    const s = String(seconds % 60).padStart(2,'0');
    return `${m}:${s}`;
}

function updateColor() {
    const limit = document.getElementById("limitInput").value * 60;
    const pauseColor = document.getElementById("pauseColor").value;
    const runColor = document.getElementById("runColor").value;
    const warningColor = document.getElementById("warningColor").value;
    const overColor = document.getElementById("overColor").value;

    let color;

    if (!running) color = pauseColor;
    else if (seconds >= limit) color = overColor;
    else if (seconds >= limit - 30) color = warningColor;
    else color = runColor;

    timerBox.style.background = color;
}

function updateDisplay() {
    timerBox.textContent = formatTime();
    updateColor();
}

function startTimer() {
    if (!running) {
        running = true;
        interval = setInterval(() => {
            seconds++;
            updateDisplay();
        }, 1000);
    }
}

function pauseTimer() {
    running = false;
    clearInterval(interval);
    updateDisplay();
}

function resetTimer() {
    running = false;
    clearInterval(interval);
    seconds = 0;
    updateDisplay();
}

function toggleFullscreen() {
    const docElm = document.documentElement;
    if (!document.fullscreenElement) {
        if (docElm.requestFullscreen) docElm.requestFullscreen();
        else if (docElm.webkitRequestFullscreen) docElm.webkitRequestFullscreen();
        else if (docElm.msRequestFullscreen) docElm.msRequestFullscreen();

        mainContent.querySelectorAll(".controls, .settings").forEach(e => e.classList.add("hidden"));
        timerBox.style.width = "100vw";
        timerBox.style.height = "100vh";
        timerBox.style.borderRadius = "0";
        timerBox.style.fontSize = "clamp(80px, 20vw, 240px)";
        exitBtn.style.display = "block";
        document.body.style.overflow = "hidden";
    }
}

function exitFullscreen() {
    if (document.exitFullscreen) document.exitFullscreen();
    else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
    else if (document.msExitFullscreen) document.msExitFullscreen();
}

document.addEventListener("fullscreenchange", restoreLayout);
document.addEventListener("webkitfullscreenchange", restoreLayout);

function restoreLayout() {
    if (!document.fullscreenElement) {
        mainContent.querySelectorAll(".controls, .settings").forEach(e => e.classList.remove("hidden"));
        timerBox.style.width = "min(90vw, 600px)";
        timerBox.style.height = "clamp(120px, 20vw, 200px)";
        timerBox.style.borderRadius = "20px";
        timerBox.style.fontSize = "clamp(60px, 10vw, 140px)";
        exitBtn.style.display = "none";
        document.body.style.overflow = "auto";
    }
}

updateDisplay();
</script>

</body>
</html>
