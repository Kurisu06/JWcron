<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cronómetro Profesional</title>

<style>
:root {
    --pause: #444444;
    --run: #16a34a;
    --warning: #f59e0b;
    --over: #dc2626;
}

body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: #0f172a;
    color: white;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background 0.4s ease;
}

.container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
}

.timer {
    width: 380px;
    height: 170px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 85px;
    font-weight: 600;
    border-radius: 20px;
    background: var(--pause);
    transition: 0.4s ease;
    letter-spacing: 4px;
}

.controls, .settings {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
}

button, input {
    background: #1e293b;
    border: none;
    color: white;
    padding: 8px 12px;
    border-radius: 10px;
    font-size: 14px;
}

button {
    cursor: pointer;
    transition: 0.2s;
}

button:hover {
    background: #334155;
}

input[type="color"] {
    padding: 2px;
    height: 35px;
}

.hidden {
    display: none;
}

/* Botón salir pantalla completa */
#exitFullscreenBtn {
    position: fixed;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,0.6);
    border: none;
    color: white;
    padding: 10px 8px;
    border-radius: 0 10px 10px 0;
    cursor: pointer;
    font-size: 12px;
    display: none;
    z-index: 999;
}

#exitFullscreenBtn:hover {
    background: rgba(0,0,0,0.8);
}
</style>
</head>
<body>

<button id="exitFullscreenBtn" onclick="exitFullscreen()">Salir</button>

<div class="container" id="mainContent">

    <div class="timer" id="timer">00:00</div>

    <div class="controls">
        <button onclick="startTimer()">▶</button>
        <button onclick="pauseTimer()">⏸</button>
        <button onclick="resetTimer()">⟲</button>
        <button onclick="toggleFullscreen()">⛶</button>
    </div>

    <div class="settings">
        <span>Límite (min)</span>
        <input type="number" id="limitInput" value="5" min="1" style="width:60px;">
    </div>

    <div class="settings">
        <span>Pausa</span><input type="color" id="pauseColor" value="#444444">
        <span>En marcha</span><input type="color" id="runColor" value="#16a34a">
        <span>Advertencia</span><input type="color" id="warningColor" value="#f59e0b">
        <span>Excedido</span><input type="color" id="overColor" value="#dc2626">
    </div>

</div>

<script>
let seconds = 0;
let running = false;
let interval;

const timerDisplay = document.getElementById("timer");
const mainContent = document.getElementById("mainContent");
const exitBtn = document.getElementById("exitFullscreenBtn");

function formatTime() {
    const m = String(Math.floor(seconds / 60)).padStart(2,'0');
    const s = String(seconds % 60).padStart(2,'0');
    return `${m}:${s}`;
}

function updateColor() {
    const limit = document.getElementById("limitInput").value * 60;
    const pauseColor = document.getElementById("pauseColor").value;
    const runColor = document.getElementById("runColor").value;
    const warningColor = document.getElementById("warningColor").value;
    const overColor = document.getElementById("overColor").value;

    let color;

    if (!running) color = pauseColor;
    else if (seconds >= limit) color = overColor;
    else if (seconds >= limit - 30) color = warningColor;
    else color = runColor;

    timerDisplay.style.background = color;
    document.body.style.background = color;
}

function updateDisplay() {
    timerDisplay.textContent = formatTime();
    updateColor();
}

function startTimer() {
    if (!running) {
        running = true;
        interval = setInterval(() => {
            seconds++;
            updateDisplay();
        }, 1000);
    }
}

function pauseTimer() {
    running = false;
    clearInterval(interval);
    updateDisplay();
}

function resetTimer() {
    running = false;
    clearInterval(interval);
    seconds = 0;
    updateDisplay();
}

function toggleFullscreen() {
    if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
        mainContent.querySelectorAll(".controls, .settings").forEach(e => e.classList.add("hidden"));
        timerDisplay.style.fontSize = "180px";
        timerDisplay.style.width = "100vw";
        timerDisplay.style.height = "100vh";
        timerDisplay.style.borderRadius = "0";
        exitBtn.style.display = "block";
    }
}

function exitFullscreen() {
    document.exitFullscreen();
}

document.addEventListener("fullscreenchange", () => {
    if (!document.fullscreenElement) {
        mainContent.querySelectorAll(".controls, .settings").forEach(e => e.classList.remove("hidden"));
        timerDisplay.style.fontSize = "85px";
        timerDisplay.style.width = "380px";
        timerDisplay.style.height = "170px";
        timerDisplay.style.borderRadius = "20px";
        exitBtn.style.display = "none";
        document.body.style.background = "#0f172a";
        updateColor();
    }
});

updateDisplay();
</script>

</body>
</html>
