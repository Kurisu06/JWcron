<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Cronómetro</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', sans-serif;
    background: #0f172a;
    color: white;
    height: 100%;
}

/* CONTENEDOR */
.container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 22px;
    padding: 20px;
    box-sizing: border-box;
}

/* RECTÁNGULO DEL CRONÓMETRO */
.timer-box {
    width: min(90vw, 600px);
    height: clamp(120px, 20vw, 200px);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: clamp(60px, 10vw, 140px);
    font-weight: 600;
    border-radius: 20px;
    background: #3f3f46;
    letter-spacing: 6px;
    transition: all 0.3s ease;
}

/* CONTROLES */
.controls {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    justify-content: center;
}

button, input {
    background: #1e293b;
    border: none;
    color: white;
    padding: 10px 16px;
    border-radius: 10px;
    font-size: 14px;
}

button {
    cursor: pointer;
    transition: 0.2s ease;
}

button:hover {
    background: #334155;
}

/* CONFIGURACIÓN */
.settings {
    display: flex;
    flex-direction: column;
    gap: 16px;
    align-items: center;
    width: 100%;
    max-width: 380px;
}

.limit-control {
    display: flex;
    align-items: center;
    gap: 10px;
}

/* CONTROLES DE COLOR */
.color-controls {
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 100%;
}

.color-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #1e293b;
    padding: 8px 12px;
    border-radius: 12px;
}

.color-item span {
    font-size: 13px;
    opacity: 0.9;
}

/* INPUT COLOR Y CUADRITO */
.color-picker-container {
    display: flex;
    align-items: center;
    gap: 6px;
}

input[type="color"] {
    width: 42px;
    height: 32px;
    border: none;
    border-radius: 6px;
    padding: 0;
    cursor: pointer;
}

/* CUADRITO COLOR SELECCIONADO */
.color-display {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: 1px solid #fff3;
}

/* FULLSCREEN */
.fullscreen-active {
    position: fixed;
    inset: 0;
    background: #0f172a;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

.fullscreen-active .timer-box {
    width: 100vw !important;
    height: 100vh !important;
    border-radius: 0 !important;
    font-size: clamp(120px, 20vw, 300px) !important;
}

/* BOTÓN SALIR */
#exitFullscreenBtn {
    position: fixed;
    top: 15px;
    left: 15px;
    background: none;
    border: none;
    color: white;
    font-size: 26px;
    opacity: 0.35;
    cursor: pointer;
    display: none;
    z-index: 10000;
}

#exitFullscreenBtn:hover {
    opacity: 0.9;
}

.hidden {
    display: none !important;
}
</style>
</head>
<body>

<button id="exitFullscreenBtn">←</button>

<div class="container" id="mainContent">

    <div class="timer-box" id="timer">00:00</div>

    <div class="controls">
        <button id="startPauseBtn">Inicio</button>
        <button onclick="resetTimer()">Reiniciar</button>
        <button onclick="stopTimer()">Stop</button>
        <button onclick="toggleFullscreen()">Pantalla completa</button>
    </div>

    <div class="settings">

        <div class="limit-control">
            <span>Tiempo límite (min)</span>
            <input type="number" id="limitInput" value="5" min="1" style="width:70px;">
        </div>

        <div class="color-controls">

            <div class="color-item">
                <span>Color en pausa</span>
                <div class="color-picker-container">
                    <input type="color" id="pauseColor" value="#3f3f46">
                    <div class="color-display" id="pauseDisplay"></div>
                </div>
            </div>

            <div class="color-item">
                <span>Color en movimiento</span>
                <div class="color-picker-container">
                    <input type="color" id="runColor" value="#16a34a">
                    <div class="color-display" id="runDisplay"></div>
                </div>
            </div>

            <div class="color-item">
                <span>Color advertencia</span>
                <div class="color-picker-container">
                    <input type="color" id="warningColor" value="#f59e0b">
                    <div class="color-display" id="warningDisplay"></div>
                </div>
            </div>

            <div class="color-item">
                <span>Tiempo excedido</span>
                <div class="color-picker-container">
                    <input type="color" id="overColor" value="#dc2626">
                    <div class="color-display" id="overDisplay"></div>
                </div>
            </div>

        </div>

    </div>

</div>

<script>
let seconds = 0;
let running = false;
let interval;
let fullscreenActive = false;

const timerBox = document.getElementById("timer");
const mainContent = document.getElementById("mainContent");
const exitBtn = document.getElementById("exitFullscreenBtn");
const startPauseBtn = document.getElementById("startPauseBtn");

/* COLOR DISPLAY */
const pauseDisplay = document.getElementById("pauseDisplay");
const runDisplay = document.getElementById("runDisplay");
const warningDisplay = document.getElementById("warningDisplay");
const overDisplay = document.getElementById("overDisplay");

function updateColorDisplays() {
    pauseDisplay.style.background = document.getElementById("pauseColor").value;
    runDisplay.style.background = document.getElementById("runColor").value;
    warningDisplay.style.background = document.getElementById("warningColor").value;
    overDisplay.style.background = document.getElementById("overColor").value;
}

document.querySelectorAll('input[type="color"]').forEach(input=>{
    input.addEventListener('input', updateColorDisplays);
});

updateColorDisplays();

/* FORMATEAR TIEMPO */
function formatTime() {
    const m = String(Math.floor(seconds / 60)).padStart(2,'0');
    const s = String(seconds % 60).padStart(2,'0');
    return `${m}:${s}`;
}

function updateColor() {
    const limit = document.getElementById("limitInput").value * 60;
    const pauseColor = document.getElementById("pauseColor").value;
    const runColor = document.getElementById("runColor").value;
    const warningColor = document.getElementById("warningColor").value;
    const overColor = document.getElementById("overColor").value;

    let color;

    if (!running) color = pauseColor;
    else if (seconds >= limit) color = overColor;
    else if (seconds >= limit - 30) color = warningColor;
    else color = runColor;

    timerBox.style.background = color;
}

function updateDisplay() {
    timerBox.textContent = formatTime();
    updateColor();
}

/* START / PAUSE TOGGLE */
startPauseBtn.addEventListener("click", () => {
    if (!running) {
        running = true;
        startPauseBtn.textContent = "Pausa";
        interval = setInterval(() => {
            seconds++;
            updateDisplay();
        }, 1000);
    } else {
        running = false;
        startPauseBtn.textContent = "Inicio";
        clearInterval(interval);
    }
});

function resetTimer() {
    running = false;
    clearInterval(interval);
    seconds = 0;
    startPauseBtn.textContent = "Inicio";
    updateDisplay();
}

function stopTimer() {
    running = false;
    clearInterval(interval);
    seconds = 0;
    startPauseBtn.textContent = "Inicio";
    updateDisplay();
}

/* FULLSCREEN */
function toggleFullscreen() {
    if (!fullscreenActive) {
        fullscreenActive = true;
        mainContent.classList.add("fullscreen-active");
        mainContent.querySelectorAll(".controls, .settings").forEach(e => e.classList.add("hidden"));
        exitBtn.style.display = "block";
        document.body.style.overflow = "hidden";

        if (document.documentElement.requestFullscreen) {
            document.documentElement.requestFullscreen().catch(()=>{});
        }
    }
}

exitBtn.addEventListener("click", () => {
    fullscreenActive = false;
    mainContent.classList.remove("fullscreen-active");
    mainContent.querySelectorAll(".controls, .settings").forEach(e => e.classList.remove("hidden"));
    exitBtn.style.display = "none";
    document.body.style.overflow = "auto";

    if (document.exitFullscreen) {
        document.exitFullscreen().catch(()=>{});
    }
});

updateDisplay();
</script>

</body>
</html>
